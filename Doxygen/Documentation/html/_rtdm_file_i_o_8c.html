<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RTDM/IELF Application Software: RtdmFileIO.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RTDM/IELF Application Software
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_e6bb53534ac0e427887cf7a94c0c004e.html">C:</a></li><li class="navelem"><a class="el" href="dir_8ceffd4ee35c3518d4e8bdc7e638efe8.html">Users</a></li><li class="navelem"><a class="el" href="dir_c21e549c5d06bed9bef6fe6ec0f471cb.html">Dave</a></li><li class="navelem"><a class="el" href="dir_2220448309bd52b1984b9bf33c415a87.html">workspace</a></li><li class="navelem"><a class="el" href="dir_324c749eaba7ded3abf2f0dc473c08ad.html">BART_RTDM</a></li><li class="navelem"><a class="el" href="dir_a4a8915a2e089e507b334ea03ff41722.html">RTDMFileIO</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">RtdmFileIO.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;global_mwt.h&quot;</code><br />
<code>#include &quot;rts_api.h&quot;</code><br />
<code>#include &quot;../include/iptcom.h&quot;</code><br />
<code>#include &quot;<a class="el" href="_rtdm_utils_8h_source.html">../RtdmStream/RtdmUtils.h</a>&quot;</code><br />
<code>#include &quot;../RtdmStream/RtdmStream.h&quot;</code><br />
<code>#include &quot;<a class="el" href="_rtdm_xml_8h_source.html">../RtdmStream/RtdmXml.h</a>&quot;</code><br />
<code>#include &quot;../RtdmStream/RtdmCrc32.h&quot;</code><br />
<code>#include &quot;<a class="el" href="_r_t_d_m_initialize_8h_source.html">../RtdmStream/RTDMInitialize.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_rtdm_file_ext_8h_source.html">../RtdmFileIO/RtdmFileExt.h</a>&quot;</code><br />
<code>#include &quot;../RtdmFileIO/RtdmFileIO.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for RtdmFileIO.c:</div>
<div class="dyncontent">
<div class="center"><img src="_rtdm_file_i_o_8c__incl.png" border="0" usemap="#_rtdm_file_i_o_8c" alt=""/></div>
<map name="_rtdm_file_i_o_8c" id="_rtdm_file_i_o_8c">
<area shape="rect" id="node5" href="_rtdm_utils_8h.html" title="../RtdmStream/RtdmUtils.h" alt="" coords="400,80,595,107"/>
<area shape="rect" id="node6" href="_rtdm_stream_8h_source.html" title="../RtdmStream/RtdmStream.h" alt="" coords="619,80,834,107"/>
<area shape="rect" id="node9" href="_rtdm_xml_8h.html" title="../RtdmStream/RtdmXml.h" alt="" coords="1070,80,1261,107"/>
<area shape="rect" id="node10" href="_rtdm_crc32_8h_source.html" title="../RtdmStream/RtdmCrc32.h" alt="" coords="1285,80,1488,107"/>
<area shape="rect" id="node11" href="_r_t_d_m_initialize_8h.html" title="../RtdmStream/RTDMInitialize.h" alt="" coords="1512,80,1731,107"/>
<area shape="rect" id="node12" href="_rtdm_file_ext_8h.html" title="../RtdmFileIO/RtdmFileExt.h" alt="" coords="1755,80,1949,107"/>
<area shape="rect" id="node13" href="_rtdm_file_i_o_8h_source.html" title="../RtdmFileIO/RtdmFileIO.h" alt="" coords="859,80,1045,107"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_rtdm_file_write.html">RtdmFileWrite</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Saved information used to write to a #.stream file. Since the act of writing to a #.stream file is asynchronous (spawned in an event driven task), the information must be saved until the event driven task is executed.  <a href="struct_rtdm_file_write.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad9a7f06961560bd8a70593a9815e379d"><td class="memItemLeft" align="right" valign="top"><a id="ad9a7f06961560bd8a70593a9815e379d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CLEANUP_EXTRA_STREAM_FILES</b>&#160;&#160;&#160;(MAX_NUMBER_OF_STREAM_FILES + 100)</td></tr>
<tr class="separator:ad9a7f06961560bd8a70593a9815e379d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b6e057d6c2476f9c5720aa451f82f39"><td class="memItemLeft" align="right" valign="top"><a id="a2b6e057d6c2476f9c5720aa451f82f39"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>INVALID_FILE_INDEX</b>&#160;&#160;&#160;0xFFFF</td></tr>
<tr class="separator:a2b6e057d6c2476f9c5720aa451f82f39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a128bd0d16e6acacf487858d4235223ac"><td class="memItemLeft" align="right" valign="top"><a id="a128bd0d16e6acacf487858d4235223ac"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>INVALID_TIME_STAMP</b>&#160;&#160;&#160;0xFFFFFFFF</td></tr>
<tr class="separator:a128bd0d16e6acacf487858d4235223ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86107fc3532a35e17ff34c0575569e5b"><td class="memItemLeft" align="right" valign="top"><a id="a86107fc3532a35e17ff34c0575569e5b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>RTDM_CLEAR_FILENAME</b>&#160;&#160;&#160;&quot;Clear.rtdm&quot;</td></tr>
<tr class="separator:a86107fc3532a35e17ff34c0575569e5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa369e15d683d34e86ba12ae8e1d4e104"><td class="memItemLeft" align="right" valign="top"><a id="aa369e15d683d34e86ba12ae8e1d4e104"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>STREAM_FILE_INDEX_FILENAME</b>&#160;&#160;&#160;&quot;StreamFileIndex.txt&quot;</td></tr>
<tr class="separator:aa369e15d683d34e86ba12ae8e1d4e104"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:aedebd5cf544727512c0a003f55f68cca"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_rtdm_file_i_o_8c.html#aedebd5cf544727512c0a003f55f68cca">StreamFileState</a> { <a class="el" href="_rtdm_file_i_o_8c.html#aedebd5cf544727512c0a003f55f68ccaa7e042001559a2a2b00126d17366754da">CREATE_NEW</a>, 
<a class="el" href="_rtdm_file_i_o_8c.html#aedebd5cf544727512c0a003f55f68ccaa3693d9ecc950883524e1c7f835adcffd">APPEND_TO_EXISTING</a>
 }<tr class="memdesc:aedebd5cf544727512c0a003f55f68cca"><td class="mdescLeft">&#160;</td><td class="mdescRight">The current state of a stream file that is being updated.  <a href="_rtdm_file_i_o_8c.html#aedebd5cf544727512c0a003f55f68cca">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:aedebd5cf544727512c0a003f55f68cca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbfc6907cc6a318c74e9246174c40ff2"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_rtdm_file_i_o_8c.html#afbfc6907cc6a318c74e9246174c40ff2">FileAction</a> { <a class="el" href="_rtdm_file_i_o_8c.html#afbfc6907cc6a318c74e9246174c40ff2a1118121b5aa260fdb822fe11dd34c6cd">NO_ACTION</a> = 0x00, 
<a class="el" href="_rtdm_file_i_o_8c.html#afbfc6907cc6a318c74e9246174c40ff2a888cc088026e1292e33067d10eaa8a33">INIT_RTDM_SYSTEM</a> = 0x01, 
<a class="el" href="_rtdm_file_i_o_8c.html#afbfc6907cc6a318c74e9246174c40ff2a06d63b572df5ed793b209a5e2801c199">WRITE_FILE</a> = 0x02, 
<a class="el" href="_rtdm_file_i_o_8c.html#afbfc6907cc6a318c74e9246174c40ff2ae92ce099b80df62f20f42dcae0b61fbf">CLOSE_CURRENT_STREAM_FILE</a> = 0x04
 }<tr class="memdesc:afbfc6907cc6a318c74e9246174c40ff2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bit mask used to determine the function to be performed.  <a href="_rtdm_file_i_o_8c.html#afbfc6907cc6a318c74e9246174c40ff2">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:afbfc6907cc6a318c74e9246174c40ff2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad369435a9d55c44cda939c256b5d3d62"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_rtdm_file_i_o_8c.html#ad369435a9d55c44cda939c256b5d3d62">InitFileIndex</a> (void)</td></tr>
<tr class="memdesc:ad369435a9d55c44cda939c256b5d3d62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines which #.stream file to start writing to.  <a href="#ad369435a9d55c44cda939c256b5d3d62">More...</a><br /></td></tr>
<tr class="separator:ad369435a9d55c44cda939c256b5d3d62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3bffe86667fb07fa7d9e47426a13574"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_rtdm_file_i_o_8c.html#ae3bffe86667fb07fa7d9e47426a13574">InitFileTracker</a> (void)</td></tr>
<tr class="memdesc:ae3bffe86667fb07fa7d9e47426a13574"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verifies the stream file tracker.  <a href="#ae3bffe86667fb07fa7d9e47426a13574">More...</a><br /></td></tr>
<tr class="separator:ae3bffe86667fb07fa7d9e47426a13574"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb8281cf0de8f2b6c69ceb98833e8e5e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_rtdm_file_i_o_8c.html#aeb8281cf0de8f2b6c69ceb98833e8e5e">CleanupDirectory</a> (void)</td></tr>
<tr class="memdesc:aeb8281cf0de8f2b6c69ceb98833e8e5e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Responsible for removing excess #.stream files.  <a href="#aeb8281cf0de8f2b6c69ceb98833e8e5e">More...</a><br /></td></tr>
<tr class="separator:aeb8281cf0de8f2b6c69ceb98833e8e5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95f19456a9ffa202d90642e8fd41b167"><td class="memItemLeft" align="right" valign="top">static BOOL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_rtdm_file_i_o_8c.html#a95f19456a9ffa202d90642e8fd41b167">CreateCarConDevFile</a> (void)</td></tr>
<tr class="memdesc:a95f19456a9ffa202d90642e8fd41b167"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create car, consist and device data file (used by PTU RTDM only)  <a href="#a95f19456a9ffa202d90642e8fd41b167">More...</a><br /></td></tr>
<tr class="separator:a95f19456a9ffa202d90642e8fd41b167"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af788565d7f19b7446f9f732a68386402"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_rtdm_file_i_o_8c.html#af788565d7f19b7446f9f732a68386402">InitiateRtdmFileIOEventTask</a> (void)</td></tr>
<tr class="memdesc:af788565d7f19b7446f9f732a68386402"><td class="mdescLeft">&#160;</td><td class="mdescRight">Causes the OS to trigger a File I/O operation.  <a href="#af788565d7f19b7446f9f732a68386402">More...</a><br /></td></tr>
<tr class="separator:af788565d7f19b7446f9f732a68386402"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a475576dbdbf7556c640cec0ef22bb282"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_rtdm_file_i_o_8c.html#a475576dbdbf7556c640cec0ef22bb282">WriteStreamFile</a> (void)</td></tr>
<tr class="memdesc:a475576dbdbf7556c640cec0ef22bb282"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates or appends a stream to a #.stream file.  <a href="#a475576dbdbf7556c640cec0ef22bb282">More...</a><br /></td></tr>
<tr class="separator:a475576dbdbf7556c640cec0ef22bb282"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfca07aca62bf5f9070c095e4f2f999d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_rtdm_file_i_o_8c.html#adfca07aca62bf5f9070c095e4f2f999d">CloseStreamFile</a> (void)</td></tr>
<tr class="memdesc:adfca07aca62bf5f9070c095e4f2f999d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes the current stream file.  <a href="#adfca07aca62bf5f9070c095e4f2f999d">More...</a><br /></td></tr>
<tr class="separator:adfca07aca62bf5f9070c095e4f2f999d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0fef821c8b090683e9a8832057d25d4"><td class="memItemLeft" align="right" valign="top">static BOOL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_rtdm_file_i_o_8c.html#ab0fef821c8b090683e9a8832057d25d4">CompactFlashWrite</a> (char *fileName, UINT8 *buffer, INT32 amount, BOOL createFile)</td></tr>
<tr class="memdesc:ab0fef821c8b090683e9a8832057d25d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function writes data to the specified file (in this case, all file I/O is performed to/from the VCU Compact FLASH. An argument determines whether data is to be written to a new file or appended to an existing file.  <a href="#ab0fef821c8b090683e9a8832057d25d4">More...</a><br /></td></tr>
<tr class="separator:ab0fef821c8b090683e9a8832057d25d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d8b06e30335aa056d904506144f74a5"><td class="memItemLeft" align="right" valign="top"><a id="a5d8b06e30335aa056d904506144f74a5"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_rtdm_file_i_o_8c.html#a5d8b06e30335aa056d904506144f74a5">RtdmClearFileProcessing</a> (void)</td></tr>
<tr class="memdesc:a5d8b06e30335aa056d904506144f74a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function examines the specified drive/directory for a specific file (defined by RTDM_CLEAR_FILENAME). This file will be uploaded by the PTU upon user command if the user wishes to clear all RTDM data. This method is the best way to gracefully clear the RTDM data streams. If this file is detected, it is deleted and then all *.stream files will be deleted. <br /></td></tr>
<tr class="separator:a5d8b06e30335aa056d904506144f74a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a3551fe5008bb61634159b65272688c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_rtdm_file_i_o_8c.html#a1a3551fe5008bb61634159b65272688c">InitializeFileIO</a> (<a class="el" href="struct_rtdm_xml_str.html">RtdmXmlStr</a> *rtdmXmlData)</td></tr>
<tr class="memdesc:a1a3551fe5008bb61634159b65272688c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the all File I/O.  <a href="#a1a3551fe5008bb61634159b65272688c">More...</a><br /></td></tr>
<tr class="separator:a1a3551fe5008bb61634159b65272688c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a411b6b48000d99b8e753325df093b1c4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_rtdm_file_i_o_8c.html#a411b6b48000d99b8e753325df093b1c4">RtdmFileIO</a> (<a class="el" href="structdata_block___rtdm_file_i_o.html">TYPE_RTDMFILEIO_IF</a> *interface)</td></tr>
<tr class="memdesc:a411b6b48000d99b8e753325df093b1c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function invoked by OS when trigger BOOL set TRUE.  <a href="#a411b6b48000d99b8e753325df093b1c4">More...</a><br /></td></tr>
<tr class="separator:a411b6b48000d99b8e753325df093b1c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a361f9494f3a28240be9a4f303343bcbb"><td class="memItemLeft" align="right" valign="top">UINT32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_rtdm_file_i_o_8c.html#a361f9494f3a28240be9a4f303343bcbb">RtdmSystemInitialize</a> (<a class="el" href="structdata_block___rtdm_stream.html">TYPE_RTDMSTREAM_IF</a> *interface)</td></tr>
<tr class="memdesc:a361f9494f3a28240be9a4f303343bcbb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the RTDM File I/O component.  <a href="#a361f9494f3a28240be9a4f303343bcbb">More...</a><br /></td></tr>
<tr class="separator:a361f9494f3a28240be9a4f303343bcbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdb40b1969f6db673e2ac470682d2feb"><td class="memItemLeft" align="right" valign="top">UINT32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_rtdm_file_i_o_8c.html#acdb40b1969f6db673e2ac470682d2feb">PrepareForFileWrite</a> (UINT8 *logBuffer, UINT32 dataBytesInBuffer, UINT16 sampleCount, <a class="el" href="struct_r_t_d_m_time_str.html">RTDMTimeStr</a> *currentTime)</td></tr>
<tr class="memdesc:acdb40b1969f6db673e2ac470682d2feb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Saves file write parameters and triggers OS File I/O operation.  <a href="#acdb40b1969f6db673e2ac470682d2feb">More...</a><br /></td></tr>
<tr class="separator:acdb40b1969f6db673e2ac470682d2feb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d92a19e4eafb443c3fbf483c98903df"><td class="memItemLeft" align="right" valign="top">UINT16&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_rtdm_file_i_o_8c.html#a0d92a19e4eafb443c3fbf483c98903df">GetCurrentStreamFileIndex</a> (void)</td></tr>
<tr class="memdesc:a0d92a19e4eafb443c3fbf483c98903df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Accessor function for static variable m_StreamFileIndex.  <a href="#a0d92a19e4eafb443c3fbf483c98903df">More...</a><br /></td></tr>
<tr class="separator:a0d92a19e4eafb443c3fbf483c98903df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a281120b964e95158b31ec5771b5622fb"><td class="memItemLeft" align="right" valign="top">BOOL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_rtdm_file_i_o_8c.html#a281120b964e95158b31ec5771b5622fb">GetStreamDataAvailable</a> (void)</td></tr>
<tr class="memdesc:a281120b964e95158b31ec5771b5622fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Accessor function for static variable m_StreamDataAvailable.  <a href="#a281120b964e95158b31ec5771b5622fb">More...</a><br /></td></tr>
<tr class="separator:a281120b964e95158b31ec5771b5622fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3efac6912203ac57e80e79a8168afd4e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_rtdm_file_i_o_8c.html#a3efac6912203ac57e80e79a8168afd4e">SetStreamDataAvailable</a> (BOOL streamDataAvailable)</td></tr>
<tr class="memdesc:a3efac6912203ac57e80e79a8168afd4e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mutator function for static variable m_StreamDataAvailable.  <a href="#a3efac6912203ac57e80e79a8168afd4e">More...</a><br /></td></tr>
<tr class="separator:a3efac6912203ac57e80e79a8168afd4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbe1af9ce2af09253427e7846c5764eb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_rtdm_file_i_o_8c.html#afbe1af9ce2af09253427e7846c5764eb">CloseCurrentStreamFile</a> (void)</td></tr>
<tr class="memdesc:afbe1af9ce2af09253427e7846c5764eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Requests the current stream file to be closed.  <a href="#afbe1af9ce2af09253427e7846c5764eb">More...</a><br /></td></tr>
<tr class="separator:afbe1af9ce2af09253427e7846c5764eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a537678eb629e1d5cbe617abba753a39f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_rtdm_file_i_o_8c.html#a537678eb629e1d5cbe617abba753a39f">CreateStreamFileIndexFile</a> (void)</td></tr>
<tr class="memdesc:a537678eb629e1d5cbe617abba753a39f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates the stream file index file.  <a href="#a537678eb629e1d5cbe617abba753a39f">More...</a><br /></td></tr>
<tr class="separator:a537678eb629e1d5cbe617abba753a39f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3438897c3a5ce793079de04cd7b14e47"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_rtdm_file_i_o_8c.html#a3438897c3a5ce793079de04cd7b14e47">GetStreamFileSentOverlay</a> (void)</td></tr>
<tr class="memdesc:a3438897c3a5ce793079de04cd7b14e47"><td class="mdescLeft">&#160;</td><td class="mdescRight">Accessor function for stream index memory overlay.  <a href="#a3438897c3a5ce793079de04cd7b14e47">More...</a><br /></td></tr>
<tr class="separator:a3438897c3a5ce793079de04cd7b14e47"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aebc39bedd759c66f8a3227530f9208ea"><td class="memItemLeft" align="right" valign="top"><a id="aebc39bedd759c66f8a3227530f9208ea"></a>
static UINT16&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_rtdm_file_i_o_8c.html#aebc39bedd759c66f8a3227530f9208ea">m_StreamFileIndex</a> = 0</td></tr>
<tr class="memdesc:aebc39bedd759c66f8a3227530f9208ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to create file name of temporary stream file. <br /></td></tr>
<tr class="separator:aebc39bedd759c66f8a3227530f9208ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e685e3710b5b094c1bce94e2df01917"><td class="memItemLeft" align="right" valign="top"><a id="a8e685e3710b5b094c1bce94e2df01917"></a>
static struct <a class="el" href="structdata_block___rtdm_stream.html">dataBlock_RtdmStream</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_rtdm_file_i_o_8c.html#a8e685e3710b5b094c1bce94e2df01917">m_StreamInterface</a> = NULL</td></tr>
<tr class="memdesc:a8e685e3710b5b094c1bce94e2df01917"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds a pointer to the MTPE stream interface structure. <br /></td></tr>
<tr class="separator:a8e685e3710b5b094c1bce94e2df01917"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d545321e7559c1d679f4ff125dddc05"><td class="memItemLeft" align="right" valign="top"><a id="a2d545321e7559c1d679f4ff125dddc05"></a>
static <a class="el" href="struct_rtdm_xml_str.html">RtdmXmlStr</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_rtdm_file_i_o_8c.html#a2d545321e7559c1d679f4ff125dddc05">m_RtdmXmlData</a> = NULL</td></tr>
<tr class="memdesc:a2d545321e7559c1d679f4ff125dddc05"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds a pointer to the data from the XML configuration file. <br /></td></tr>
<tr class="separator:a2d545321e7559c1d679f4ff125dddc05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7be7507d8a3b47caf032cb6d24c1cb0"><td class="memItemLeft" align="right" valign="top"><a id="ad7be7507d8a3b47caf032cb6d24c1cb0"></a>
static <a class="el" href="_rtdm_file_i_o_8c.html#aedebd5cf544727512c0a003f55f68cca">StreamFileState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_rtdm_file_i_o_8c.html#ad7be7507d8a3b47caf032cb6d24c1cb0">m_StreamFileState</a></td></tr>
<tr class="memdesc:ad7be7507d8a3b47caf032cb6d24c1cb0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines whether to create or append to a #.stream file. <br /></td></tr>
<tr class="separator:ad7be7507d8a3b47caf032cb6d24c1cb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6d648e1ff7995bd65009556893856c4"><td class="memItemLeft" align="right" valign="top"><a id="ad6d648e1ff7995bd65009556893856c4"></a>
static <a class="el" href="_rtdm_file_i_o_8c.html#afbfc6907cc6a318c74e9246174c40ff2">FileAction</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_rtdm_file_i_o_8c.html#ad6d648e1ff7995bd65009556893856c4">m_FileAction</a> = 0</td></tr>
<tr class="memdesc:ad6d648e1ff7995bd65009556893856c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of file action to be performed. <br /></td></tr>
<tr class="separator:ad6d648e1ff7995bd65009556893856c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add91d346c5e4fa9653983510f5114aa6"><td class="memItemLeft" align="right" valign="top"><a id="add91d346c5e4fa9653983510f5114aa6"></a>
static <a class="el" href="struct_rtdm_file_write.html">RtdmFileWrite</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_rtdm_file_i_o_8c.html#add91d346c5e4fa9653983510f5114aa6">m_FileWrite</a></td></tr>
<tr class="memdesc:add91d346c5e4fa9653983510f5114aa6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds information when about the stream to be written. <br /></td></tr>
<tr class="separator:add91d346c5e4fa9653983510f5114aa6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53b657e55433ae7bd3e7e0d54186069e"><td class="memItemLeft" align="right" valign="top"><a id="a53b657e55433ae7bd3e7e0d54186069e"></a>
static BOOL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_rtdm_file_i_o_8c.html#a53b657e55433ae7bd3e7e0d54186069e">m_StreamDataAvailable</a> = FALSE</td></tr>
<tr class="memdesc:a53b657e55433ae7bd3e7e0d54186069e"><td class="mdescLeft">&#160;</td><td class="mdescRight">TODO. <br /></td></tr>
<tr class="separator:a53b657e55433ae7bd3e7e0d54186069e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38e03c4755ed1e0c4c555ea45374ecb0"><td class="memItemLeft" align="right" valign="top"><a id="a38e03c4755ed1e0c4c555ea45374ecb0"></a>
static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_rtdm_file_i_o_8c.html#a38e03c4755ed1e0c4c555ea45374ecb0">m_StreamFileSentOverlay</a></td></tr>
<tr class="memdesc:a38e03c4755ed1e0c4c555ea45374ecb0"><td class="mdescLeft">&#160;</td><td class="mdescRight">memory overlay of file "StreamFileIndex.txt" <br /></td></tr>
<tr class="separator:a38e03c4755ed1e0c4c555ea45374ecb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="aedebd5cf544727512c0a003f55f68cca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aedebd5cf544727512c0a003f55f68cca">&sect;&nbsp;</a></span>StreamFileState</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="_rtdm_file_i_o_8c.html#aedebd5cf544727512c0a003f55f68cca">StreamFileState</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The current state of a stream file that is being updated. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="aedebd5cf544727512c0a003f55f68ccaa7e042001559a2a2b00126d17366754da"></a>CREATE_NEW&#160;</td><td class="fielddoc"><p>Opens a new stream file </p>
</td></tr>
<tr><td class="fieldname"><a id="aedebd5cf544727512c0a003f55f68ccaa3693d9ecc950883524e1c7f835adcffd"></a>APPEND_TO_EXISTING&#160;</td><td class="fielddoc"><p>Appends to the end of an existing stream file </p>
</td></tr>
</table>

</div>
</div>
<a id="afbfc6907cc6a318c74e9246174c40ff2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbfc6907cc6a318c74e9246174c40ff2">&sect;&nbsp;</a></span>FileAction</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="_rtdm_file_i_o_8c.html#afbfc6907cc6a318c74e9246174c40ff2">FileAction</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Bit mask used to determine the function to be performed. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="afbfc6907cc6a318c74e9246174c40ff2a1118121b5aa260fdb822fe11dd34c6cd"></a>NO_ACTION&#160;</td><td class="fielddoc"><p>No function requested or all functions have been processed </p>
</td></tr>
<tr><td class="fieldname"><a id="afbfc6907cc6a318c74e9246174c40ff2a888cc088026e1292e33067d10eaa8a33"></a>INIT_RTDM_SYSTEM&#160;</td><td class="fielddoc"><p>Initialize the RTDM file I/O system </p>
</td></tr>
<tr><td class="fieldname"><a id="afbfc6907cc6a318c74e9246174c40ff2a06d63b572df5ed793b209a5e2801c199"></a>WRITE_FILE&#160;</td><td class="fielddoc"><p>Writes to a #.stream file </p>
</td></tr>
<tr><td class="fieldname"><a id="afbfc6907cc6a318c74e9246174c40ff2ae92ce099b80df62f20f42dcae0b61fbf"></a>CLOSE_CURRENT_STREAM_FILE&#160;</td><td class="fielddoc"><p>Used to close existing #.stream file in preparation for building and FTPing .dan file to the MDS only </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ad369435a9d55c44cda939c256b5d3d62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad369435a9d55c44cda939c256b5d3d62">&sect;&nbsp;</a></span>InitFileIndex()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void InitFileIndex </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determines which #.stream file to start writing to. </p>
<p>Called at startup / system initialization. Determines what #.stream files exist and if they do exist, verifies they are valid by examining the final stream in the file. The newest file is then determined. Once the newest file is determined, then if room exists in the file for more streams, this file is set as the file to begin writing to. If there isn't room, then the next file is the file where streams will be written. </p>

</div>
</div>
<a id="ae3bffe86667fb07fa7d9e47426a13574"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3bffe86667fb07fa7d9e47426a13574">&sect;&nbsp;</a></span>InitFileTracker()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void InitFileTracker </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Verifies the stream file tracker. </p>
<p>Called at startup / system initialization. The stream file tracker is used to determine what stream files have been compiled and sent to the MDS over FTP. This function verifies the file exists and if it does exist, verifies it has valid contents. If the file doesn't exist, a new file is created and all files are assumed not to been uploaded. If the file has too many or too little entries, again, a new file is created. </p>

</div>
</div>
<a id="aeb8281cf0de8f2b6c69ceb98833e8e5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb8281cf0de8f2b6c69ceb98833e8e5e">&sect;&nbsp;</a></span>CleanupDirectory()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void CleanupDirectory </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Responsible for removing excess #.stream files. </p>
<p>This function deletes all #.stream files that are beyond the current scope. This usually occurs whenever there is a software change that limits the amount of stream files required to support the minimum stream files time span. </p>

</div>
</div>
<a id="a95f19456a9ffa202d90642e8fd41b167"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95f19456a9ffa202d90642e8fd41b167">&sect;&nbsp;</a></span>CreateCarConDevFile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static BOOL CreateCarConDevFile </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create car, consist and device data file (used by PTU RTDM only) </p>
<p>This function creates a data file used by the PTU RTDM only that informs the PTU of the Car Id, Device Id and Consiste Id</p>
<dl class="section return"><dt>Returns</dt><dd>BOOL - TRUE if all OS/file calls; FALSE otherwise </dd></dl>

</div>
</div>
<a id="af788565d7f19b7446f9f732a68386402"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af788565d7f19b7446f9f732a68386402">&sect;&nbsp;</a></span>InitiateRtdmFileIOEventTask()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void InitiateRtdmFileIOEventTask </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Causes the OS to trigger a File I/O operation. </p>
<p>This function sets the OS BOOL flag to TRUE to trigger the event driven file I/O task. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="_rtdm_file_i_o_8c_af788565d7f19b7446f9f732a68386402_cgraph.png" border="0" usemap="#_rtdm_file_i_o_8c_af788565d7f19b7446f9f732a68386402_cgraph" alt=""/></div>
<map name="_rtdm_file_i_o_8c_af788565d7f19b7446f9f732a68386402_cgraph" id="_rtdm_file_i_o_8c_af788565d7f19b7446f9f732a68386402_cgraph">
<area shape="rect" id="node2" href="_rtdm_file_i_o_8c.html#a411b6b48000d99b8e753325df093b1c4" title="Function invoked by OS when trigger BOOL set TRUE. " alt="" coords="252,56,343,83"/>
<area shape="rect" id="node3" href="_r_t_d_m_initialize_8c.html#aaf4ee2331ff055f5bfeae051f4d23293" title="Responsible for initializing the RTDM functionality. " alt="" coords="391,5,573,32"/>
<area shape="rect" id="node5" href="_rtdm_file_i_o_8c.html#a475576dbdbf7556c640cec0ef22bb282" title="Creates or appends a stream to a #.stream file. " alt="" coords="421,56,543,83"/>
<area shape="rect" id="node6" href="_rtdm_file_i_o_8c.html#adfca07aca62bf5f9070c095e4f2f999d" title="Closes the current stream file. " alt="" coords="419,107,545,133"/>
<area shape="rect" id="node4" href="_rtdm_utils_8c.html#afb182e9d86d4c2b584aa416f6d0d7507" title="Verifies the storage directory exists and creates it if it doesn&#39;t. " alt="" coords="621,5,832,32"/>
</map>
</div>

</div>
</div>
<a id="a475576dbdbf7556c640cec0ef22bb282"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a475576dbdbf7556c640cec0ef22bb282">&sect;&nbsp;</a></span>WriteStreamFile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void WriteStreamFile </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates or appends a stream to a #.stream file. </p>
<p>This function creates or appends a stream of data to a #.stream file. It creates the stream header and writes to the file. It then appends the stream data. Whether a file is created or appended depends the amount of time allocated for each #.stream file. NOTE: This function is run in a event driven background task and it is expected that the function <a class="el" href="_rtdm_file_i_o_8c.html#acdb40b1969f6db673e2ac470682d2feb" title="Saves file write parameters and triggers OS File I/O operation. ">PrepareForFileWrite()</a> has been called which effectively triggers this function. </p>

</div>
</div>
<a id="adfca07aca62bf5f9070c095e4f2f999d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfca07aca62bf5f9070c095e4f2f999d">&sect;&nbsp;</a></span>CloseStreamFile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void CloseStreamFile </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Closes the current stream file. </p>
<p>This function closes the current stream file. It then sets the oldest file index so that the compilation process to build the .dan file that will be FTPed to a remote server can begin.</p>
<p>IMPORTANT: This function must be run at a higher priority than the RtdmBuildFTPDan. </p>

</div>
</div>
<a id="ab0fef821c8b090683e9a8832057d25d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0fef821c8b090683e9a8832057d25d4">&sect;&nbsp;</a></span>CompactFlashWrite()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static BOOL CompactFlashWrite </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>fileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT8 *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">INT32&#160;</td>
          <td class="paramname"><em>amount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BOOL&#160;</td>
          <td class="paramname"><em>createFile</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function writes data to the specified file (in this case, all file I/O is performed to/from the VCU Compact FLASH. An argument determines whether data is to be written to a new file or appended to an existing file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fileName</td><td>- the full name of the file to write to </td></tr>
    <tr><td class="paramname">buffer</td><td>- the buffer from which data is written </td></tr>
    <tr><td class="paramname">amount</td><td>- the amount of data from the buffer to write </td></tr>
    <tr><td class="paramname">createFile</td><td>- TRUE to create a new file; FALSE to append data to existing file</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>BOOL - TRUE if all OS/file calls; FALSE otherwise </dd></dl>

</div>
</div>
<a id="a1a3551fe5008bb61634159b65272688c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a3551fe5008bb61634159b65272688c">&sect;&nbsp;</a></span>InitializeFileIO()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void InitializeFileIO </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_rtdm_xml_str.html">RtdmXmlStr</a> *&#160;</td>
          <td class="paramname"><em>rtdmXmlData</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the all File I/O. </p>
<p>This function performs an initialization and verification of RTDM files and directories.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rtdmXmlData</td><td>- pointer to XML data retrieved from the configuration file </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a411b6b48000d99b8e753325df093b1c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a411b6b48000d99b8e753325df093b1c4">&sect;&nbsp;</a></span>RtdmFileIO()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RtdmFileIO </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdata_block___rtdm_file_i_o.html">TYPE_RTDMFILEIO_IF</a> *&#160;</td>
          <td class="paramname"><em>interface</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function invoked by OS when trigger BOOL set TRUE. </p>
<p>This function is invoked by the OS whenever the specified BOOL flag (RTDMSendMessage_trig) is set TRUE. The OS effectively spawns this function as an event driven task so that the length of time to execute doesn't adversely affect (cause overflows) of the real time cyclic task(s) that invoked is. The function determines the desired file operation to perform based on the contents of "m_FileAction" which is a bitmask variable. This variable must be updated prior to RTDMSendMessage_trig being set to TRUE.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">interface</td><td>- pointer to input data to event driven task (see MTPE project) </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="_rtdm_file_i_o_8c_a411b6b48000d99b8e753325df093b1c4_cgraph.png" border="0" usemap="#_rtdm_file_i_o_8c_a411b6b48000d99b8e753325df093b1c4_cgraph" alt=""/></div>
<map name="_rtdm_file_i_o_8c_a411b6b48000d99b8e753325df093b1c4_cgraph" id="_rtdm_file_i_o_8c_a411b6b48000d99b8e753325df093b1c4_cgraph">
<area shape="rect" id="node2" href="_r_t_d_m_initialize_8c.html#aaf4ee2331ff055f5bfeae051f4d23293" title="Responsible for initializing the RTDM functionality. " alt="" coords="144,5,327,32"/>
<area shape="rect" id="node4" href="_rtdm_file_i_o_8c.html#a475576dbdbf7556c640cec0ef22bb282" title="Creates or appends a stream to a #.stream file. " alt="" coords="174,56,297,83"/>
<area shape="rect" id="node5" href="_rtdm_file_i_o_8c.html#adfca07aca62bf5f9070c095e4f2f999d" title="Closes the current stream file. " alt="" coords="172,107,299,133"/>
<area shape="rect" id="node3" href="_rtdm_utils_8c.html#afb182e9d86d4c2b584aa416f6d0d7507" title="Verifies the storage directory exists and creates it if it doesn&#39;t. " alt="" coords="375,5,585,32"/>
</map>
</div>

</div>
</div>
<a id="a361f9494f3a28240be9a4f303343bcbb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a361f9494f3a28240be9a4f303343bcbb">&sect;&nbsp;</a></span>RtdmSystemInitialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UINT32 RtdmSystemInitialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdata_block___rtdm_stream.html">TYPE_RTDMSTREAM_IF</a> *&#160;</td>
          <td class="paramname"><em>interface</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the RTDM File I/O component. </p>
<p>This function is used to invoke the initialization of the RTDM file I/O. Due to the length of the time it takes, this operation must be run in the event driven task. No stream data is collected until the operation that executes in the background is complete.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">interface</td><td>- pointer the RTDM STREAM data (not file I/O) </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="_rtdm_file_i_o_8c_a361f9494f3a28240be9a4f303343bcbb_cgraph.png" border="0" usemap="#_rtdm_file_i_o_8c_a361f9494f3a28240be9a4f303343bcbb_cgraph" alt=""/></div>
<map name="_rtdm_file_i_o_8c_a361f9494f3a28240be9a4f303343bcbb_cgraph" id="_rtdm_file_i_o_8c_a361f9494f3a28240be9a4f303343bcbb_cgraph">
<area shape="rect" id="node2" href="_rtdm_file_i_o_8c.html#af788565d7f19b7446f9f732a68386402" title="Causes the OS to trigger a File I/O operation. " alt="" coords="209,56,408,83"/>
<area shape="rect" id="node3" href="_rtdm_file_i_o_8c.html#a411b6b48000d99b8e753325df093b1c4" title="Function invoked by OS when trigger BOOL set TRUE. " alt="" coords="456,56,547,83"/>
<area shape="rect" id="node4" href="_r_t_d_m_initialize_8c.html#aaf4ee2331ff055f5bfeae051f4d23293" title="Responsible for initializing the RTDM functionality. " alt="" coords="595,5,777,32"/>
<area shape="rect" id="node6" href="_rtdm_file_i_o_8c.html#a475576dbdbf7556c640cec0ef22bb282" title="Creates or appends a stream to a #.stream file. " alt="" coords="625,56,747,83"/>
<area shape="rect" id="node7" href="_rtdm_file_i_o_8c.html#adfca07aca62bf5f9070c095e4f2f999d" title="Closes the current stream file. " alt="" coords="623,107,749,133"/>
<area shape="rect" id="node5" href="_rtdm_utils_8c.html#afb182e9d86d4c2b584aa416f6d0d7507" title="Verifies the storage directory exists and creates it if it doesn&#39;t. " alt="" coords="825,5,1036,32"/>
</map>
</div>

</div>
</div>
<a id="acdb40b1969f6db673e2ac470682d2feb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acdb40b1969f6db673e2ac470682d2feb">&sect;&nbsp;</a></span>PrepareForFileWrite()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UINT32 PrepareForFileWrite </td>
          <td>(</td>
          <td class="paramtype">UINT8 *&#160;</td>
          <td class="paramname"><em>logBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT32&#160;</td>
          <td class="paramname"><em>dataBytesInBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT16&#160;</td>
          <td class="paramname"><em>sampleCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_r_t_d_m_time_str.html">RTDMTimeStr</a> *&#160;</td>
          <td class="paramname"><em>currentTime</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Saves file write parameters and triggers OS File I/O operation. </p>
<p>This function saves all of the necessary parameters to write stream data to a file. If a previous file write hasn't finished this function aborts.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">logBuffer</td><td>- pointer the stream data buffer </td></tr>
    <tr><td class="paramname">dataBytesInBuffer</td><td>- the number of bytes in logBuffer </td></tr>
    <tr><td class="paramname">sampleCount</td><td>- the number of samples in the current stream </td></tr>
    <tr><td class="paramname">currentTime</td><td>- the current time </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0d92a19e4eafb443c3fbf483c98903df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d92a19e4eafb443c3fbf483c98903df">&sect;&nbsp;</a></span>GetCurrentStreamFileIndex()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UINT16 GetCurrentStreamFileIndex </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Accessor function for static variable m_StreamFileIndex. </p>
<p>This function allows other modules to access the current value of m_StreamFileIndex. </p>

</div>
</div>
<a id="a281120b964e95158b31ec5771b5622fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a281120b964e95158b31ec5771b5622fb">&sect;&nbsp;</a></span>GetStreamDataAvailable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOL GetStreamDataAvailable </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Accessor function for static variable m_StreamDataAvailable. </p>
<p>This function allows other modules to access the current value of m_StreamDataAvailable. </p>

</div>
</div>
<a id="a3efac6912203ac57e80e79a8168afd4e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3efac6912203ac57e80e79a8168afd4e">&sect;&nbsp;</a></span>SetStreamDataAvailable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SetStreamDataAvailable </td>
          <td>(</td>
          <td class="paramtype">BOOL&#160;</td>
          <td class="paramname"><em>streamDataAvailable</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mutator function for static variable m_StreamDataAvailable. </p>
<p>This function allows other modules to change the current value of m_StreamDataAvailable. </p>

</div>
</div>
<a id="afbe1af9ce2af09253427e7846c5764eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbe1af9ce2af09253427e7846c5764eb">&sect;&nbsp;</a></span>CloseCurrentStreamFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CloseCurrentStreamFile </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Requests the current stream file to be closed. </p>
<p>This function is invoked to set the flag in the event driven File IO task to close the current stream file (the stream file that is being written to). </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="_rtdm_file_i_o_8c_afbe1af9ce2af09253427e7846c5764eb_cgraph.png" border="0" usemap="#_rtdm_file_i_o_8c_afbe1af9ce2af09253427e7846c5764eb_cgraph" alt=""/></div>
<map name="_rtdm_file_i_o_8c_afbe1af9ce2af09253427e7846c5764eb_cgraph" id="_rtdm_file_i_o_8c_afbe1af9ce2af09253427e7846c5764eb_cgraph">
<area shape="rect" id="node2" href="_rtdm_file_i_o_8c.html#adfca07aca62bf5f9070c095e4f2f999d" title="Closes the current stream file. " alt="" coords="228,5,355,32"/>
</map>
</div>

</div>
</div>
<a id="a537678eb629e1d5cbe617abba753a39f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a537678eb629e1d5cbe617abba753a39f">&sect;&nbsp;</a></span>CreateStreamFileIndexFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CreateStreamFileIndexFile </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates the stream file index file. </p>
<p>This function copies the memory overlay of the stream index file to a file. This file is used to track the stream files that were already compiled and sent to the FTP server. This avoids compiling and sending files that have already been sent to the FTP server. </p>

</div>
</div>
<a id="a3438897c3a5ce793079de04cd7b14e47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3438897c3a5ce793079de04cd7b14e47">&sect;&nbsp;</a></span>GetStreamFileSentOverlay()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* GetStreamFileSentOverlay </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Accessor function for stream index memory overlay. </p>
<p>This function allows other modules to access the current state of the stream file index memory overlay</p>
<dl class="section return"><dt>Returns</dt><dd>char * - pointer to the stream file index memory overlay </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Dec 7 2016 09:33:28 for RTDM/IELF Application Software by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
