<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RTDM/IELF Application Software: RtdmDataLog.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RTDM/IELF Application Software
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_e6bb53534ac0e427887cf7a94c0c004e.html">C:</a></li><li class="navelem"><a class="el" href="dir_8ceffd4ee35c3518d4e8bdc7e638efe8.html">Users</a></li><li class="navelem"><a class="el" href="dir_c21e549c5d06bed9bef6fe6ec0f471cb.html">Dave</a></li><li class="navelem"><a class="el" href="dir_2220448309bd52b1984b9bf33c415a87.html">workspace</a></li><li class="navelem"><a class="el" href="dir_324c749eaba7ded3abf2f0dc473c08ad.html">BART_RTDM</a></li><li class="navelem"><a class="el" href="dir_2ced80d5746a4759c97f11bbcdc461fb.html">RTDMStream</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">RtdmDataLog.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;global_mwt.h&quot;</code><br />
<code>#include &quot;rts_api.h&quot;</code><br />
<code>#include &quot;../include/iptcom.h&quot;</code><br />
<code>#include &quot;<a class="el" href="_rtdm_utils_8h_source.html">../RtdmStream/RtdmUtils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_rtdm_file_ext_8h_source.html">../RtdmFileIO/RtdmFileExt.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for RtdmDataLog.c:</div>
<div class="dyncontent">
<div class="center"><img src="_rtdm_data_log_8c__incl.png" border="0" usemap="#_rtdm_data_log_8c" alt=""/></div>
<map name="_rtdm_data_log_8c" id="_rtdm_data_log_8c">
<area shape="rect" id="node5" href="_rtdm_utils_8h.html" title="../RtdmStream/RtdmUtils.h" alt="" coords="400,80,595,107"/>
<area shape="rect" id="node6" href="_rtdm_file_ext_8h.html" title="../RtdmFileIO/RtdmFileExt.h" alt="" coords="619,80,813,107"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac99a375fa2a97514609842058cff083f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_rtdm_data_log_8c.html#ac99a375fa2a97514609842058cff083f">SwapBuffers</a> (void)</td></tr>
<tr class="memdesc:ac99a375fa2a97514609842058cff083f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Switches data log buffer pointer.  <a href="#ac99a375fa2a97514609842058cff083f">More...</a><br /></td></tr>
<tr class="separator:ac99a375fa2a97514609842058cff083f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c040d4d930b28032d5e7273fbaf2e8b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_rtdm_data_log_8c.html#a5c040d4d930b28032d5e7273fbaf2e8b">InitializeDataLog</a> (<a class="el" href="struct_rtdm_xml_str.html">RtdmXmlStr</a> *rtdmXmlData)</td></tr>
<tr class="memdesc:a5c040d4d930b28032d5e7273fbaf2e8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes data log information.  <a href="#a5c040d4d930b28032d5e7273fbaf2e8b">More...</a><br /></td></tr>
<tr class="separator:a5c040d4d930b28032d5e7273fbaf2e8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14cef75b433e9bd8b05b8f04761222e0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_rtdm_data_log_8c.html#a14cef75b433e9bd8b05b8f04761222e0">ServiceDataLog</a> (UINT8 *changedSignalData, UINT8 *newSignalData, UINT32 dataAmount, <a class="el" href="struct_data_sample_str.html">DataSampleStr</a> *dataSample, <a class="el" href="struct_r_t_d_m_time_str.html">RTDMTimeStr</a> *currentTime)</td></tr>
<tr class="memdesc:a14cef75b433e9bd8b05b8f04761222e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the data log with changed data.  <a href="#a14cef75b433e9bd8b05b8f04761222e0">More...</a><br /></td></tr>
<tr class="separator:a14cef75b433e9bd8b05b8f04761222e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a42f58cc71547678c064a5adfa6bfa6e2"><td class="memItemLeft" align="right" valign="top"><a id="a42f58cc71547678c064a5adfa6bfa6e2"></a>
static UINT8 *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_rtdm_data_log_8c.html#a42f58cc71547678c064a5adfa6bfa6e2">m_RTDMDataLogPingPtr</a> = NULL</td></tr>
<tr class="memdesc:a42f58cc71547678c064a5adfa6bfa6e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to dynamically allocated memory that will store an entire "#.stream" file. <br /></td></tr>
<tr class="separator:a42f58cc71547678c064a5adfa6bfa6e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca34dc4dac3d304b9e679608076db68c"><td class="memItemLeft" align="right" valign="top"><a id="aca34dc4dac3d304b9e679608076db68c"></a>
static UINT8 *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_rtdm_data_log_8c.html#aca34dc4dac3d304b9e679608076db68c">m_RTDMDataLogPongPtr</a> = NULL</td></tr>
<tr class="memdesc:aca34dc4dac3d304b9e679608076db68c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to dynamically allocated memory that will store an entire "#.stream" file. <br /></td></tr>
<tr class="separator:aca34dc4dac3d304b9e679608076db68c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06514d3fe653fe1392071096da719a1a"><td class="memItemLeft" align="right" valign="top"><a id="a06514d3fe653fe1392071096da719a1a"></a>
static UINT8 *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_rtdm_data_log_8c.html#a06514d3fe653fe1392071096da719a1a">m_RTDMDataLogPingPongPtr</a> = NULL</td></tr>
<tr class="memdesc:a06514d3fe653fe1392071096da719a1a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Points to either the Ping or Pong buffer above; used to write a data stream. This allows the software to write to one buffer (e.g. ping) memory while another OS task reads from the other buffer (e.g. pong) and writes to compact FLASH.. <br /></td></tr>
<tr class="separator:a06514d3fe653fe1392071096da719a1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d545321e7559c1d679f4ff125dddc05"><td class="memItemLeft" align="right" valign="top"><a id="a2d545321e7559c1d679f4ff125dddc05"></a>
static <a class="el" href="struct_rtdm_xml_str.html">RtdmXmlStr</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_rtdm_data_log_8c.html#a2d545321e7559c1d679f4ff125dddc05">m_RtdmXmlData</a> = NULL</td></tr>
<tr class="memdesc:a2d545321e7559c1d679f4ff125dddc05"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to RTDM XML data structure. <br /></td></tr>
<tr class="separator:a2d545321e7559c1d679f4ff125dddc05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bfda5d002fde8b520afeee7d0b99b2f"><td class="memItemLeft" align="right" valign="top"><a id="a4bfda5d002fde8b520afeee7d0b99b2f"></a>
static UINT32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_rtdm_data_log_8c.html#a4bfda5d002fde8b520afeee7d0b99b2f">m_RTDMDataLogIndex</a> = 0</td></tr>
<tr class="memdesc:a4bfda5d002fde8b520afeee7d0b99b2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to index into the current write buffer pointed to by m_RTDMDataLogPingPongPtr. <br /></td></tr>
<tr class="separator:a4bfda5d002fde8b520afeee7d0b99b2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ad1594e781027f09c9b204d30d46993"><td class="memItemLeft" align="right" valign="top"><a id="a5ad1594e781027f09c9b204d30d46993"></a>
static UINT32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_rtdm_data_log_8c.html#a5ad1594e781027f09c9b204d30d46993">m_SampleCount</a> = 0</td></tr>
<tr class="memdesc:a5ad1594e781027f09c9b204d30d46993"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maintains the number of periodic samples. <br /></td></tr>
<tr class="separator:a5ad1594e781027f09c9b204d30d46993"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fef4b19e0e496db44d71ecd6668d02f"><td class="memItemLeft" align="right" valign="top"><a id="a5fef4b19e0e496db44d71ecd6668d02f"></a>
static BOOL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_rtdm_data_log_8c.html#a5fef4b19e0e496db44d71ecd6668d02f">m_NewStreamStarted</a> = TRUE</td></tr>
<tr class="memdesc:a5fef4b19e0e496db44d71ecd6668d02f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Becomes TRUE when a new stream of data is started in the data log. Forces, the data log to capture all samples and not just changed ones if compression is enabled. <br /></td></tr>
<tr class="separator:a5fef4b19e0e496db44d71ecd6668d02f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="ac99a375fa2a97514609842058cff083f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac99a375fa2a97514609842058cff083f">&sect;&nbsp;</a></span>SwapBuffers()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void SwapBuffers </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Switches data log buffer pointer. </p>
<p>This function switches the data log buffer pointer. Two buffers are required because while one is being updated with real time data, the other buffer's contents are being written to permanent storage. </p>

</div>
</div>
<a id="a5c040d4d930b28032d5e7273fbaf2e8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c040d4d930b28032d5e7273fbaf2e8b">&sect;&nbsp;</a></span>InitializeDataLog()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void InitializeDataLog </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_rtdm_xml_str.html">RtdmXmlStr</a> *&#160;</td>
          <td class="paramname"><em>rtdmXmlData</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes data log information. </p>
<p>Responsible for allocating memory to hold data log information before writing this data to a file.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rtdmXmlData</td><td>- pointer to pointer for XML configuration data (pointer to XML data returned to calling function) </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="_rtdm_data_log_8c_a5c040d4d930b28032d5e7273fbaf2e8b_cgraph.png" border="0" usemap="#_rtdm_data_log_8c_a5c040d4d930b28032d5e7273fbaf2e8b_cgraph" alt=""/></div>
<map name="_rtdm_data_log_8c_a5c040d4d930b28032d5e7273fbaf2e8b_cgraph" id="_rtdm_data_log_8c_a5c040d4d930b28032d5e7273fbaf2e8b_cgraph">
<area shape="rect" id="node2" href="_rtdm_utils_8c.html#a34c91371275a8d591035cde0638a8386" title="Allocates memory from the heap. " alt="" coords="180,5,363,32"/>
</map>
</div>

</div>
</div>
<a id="a14cef75b433e9bd8b05b8f04761222e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14cef75b433e9bd8b05b8f04761222e0">&sect;&nbsp;</a></span>ServiceDataLog()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ServiceDataLog </td>
          <td>(</td>
          <td class="paramtype">UINT8 *&#160;</td>
          <td class="paramname"><em>changedSignalData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT8 *&#160;</td>
          <td class="paramname"><em>newSignalData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT32&#160;</td>
          <td class="paramname"><em>dataAmount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_data_sample_str.html">DataSampleStr</a> *&#160;</td>
          <td class="paramname"><em>dataSample</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_r_t_d_m_time_str.html">RTDMTimeStr</a> *&#160;</td>
          <td class="paramname"><em>currentTime</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the data log with changed data. </p>
<p>Responsible for updating the data log with changed signal data. Determines if a file write occurs to save the data if the memory buffer is full or the maximum amount of time has expired</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">changedSignalData</td><td>- pointer to changed signal data (formatted and ready to write with signal id and data </td></tr>
    <tr><td class="paramname">newSignalData</td><td>- pointer to new signal data (formatted and ready to write with signal id and data </td></tr>
    <tr><td class="paramname">dataAmount</td><td>- amount of data in the changedSignal pointer </td></tr>
    <tr><td class="paramname">dataSample</td><td>- pointer to stream data header (timestamp, accuracy and count) </td></tr>
    <tr><td class="paramname">currentTime</td><td>- pointer to current time </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Dec 7 2016 09:33:28 for RTDM/IELF Application Software by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
