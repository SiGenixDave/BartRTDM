<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RTDM/IELF Application Software: IELFTask.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RTDM/IELF Application Software
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_e6bb53534ac0e427887cf7a94c0c004e.html">C:</a></li><li class="navelem"><a class="el" href="dir_8ceffd4ee35c3518d4e8bdc7e638efe8.html">Users</a></li><li class="navelem"><a class="el" href="dir_c21e549c5d06bed9bef6fe6ec0f471cb.html">Dave</a></li><li class="navelem"><a class="el" href="dir_2220448309bd52b1984b9bf33c415a87.html">workspace</a></li><li class="navelem"><a class="el" href="dir_324c749eaba7ded3abf2f0dc473c08ad.html">BART_RTDM</a></li><li class="navelem"><a class="el" href="dir_9b47076b99470bd657515f23f7b8ab41.html">IELF</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">IELFTask.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;global_mwt.h&quot;</code><br />
<code>#include &quot;rts_api.h&quot;</code><br />
<code>#include &quot;../include/iptcom.h&quot;</code><br />
<code>#include &quot;<a class="el" href="_i_e_l_f_8h_source.html">../IELF/IELF.h</a>&quot;</code><br />
<code>#include &quot;../IELF/IELFTask.h&quot;</code><br />
<code>#include &quot;<a class="el" href="_i_e_l_f_callback_8h_source.html">../IELF/IELFCallback.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_rtdm_utils_8h_source.html">../RtdmStream/RtdmUtils.h</a>&quot;</code><br />
<code>#include &quot;../RtdmStream/RtdmCrc32.h&quot;</code><br />
<code>#include &quot;<a class="el" href="_rtdm_file_ext_8h_source.html">../RtdmFileIO/RtdmFileExt.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for IELFTask.c:</div>
<div class="dyncontent">
<div class="center"><img src="_i_e_l_f_task_8c__incl.png" border="0" usemap="#_i_e_l_f_task_8c" alt=""/></div>
<map name="_i_e_l_f_task_8c" id="_i_e_l_f_task_8c">
<area shape="rect" id="node5" href="_i_e_l_f_8h.html" title="../IELF/IELF.h" alt="" coords="401,80,501,107"/>
<area shape="rect" id="node8" href="_i_e_l_f_task_8h_source.html" title="../IELF/IELFTask.h" alt="" coords="525,80,654,107"/>
<area shape="rect" id="node9" href="_i_e_l_f_callback_8h.html" title="../IELF/IELFCallback.h" alt="" coords="678,80,831,107"/>
<area shape="rect" id="node10" href="_rtdm_utils_8h.html" title="../RtdmStream/RtdmUtils.h" alt="" coords="856,80,1051,107"/>
<area shape="rect" id="node11" href="_rtdm_crc32_8h_source.html" title="../RtdmStream/RtdmCrc32.h" alt="" coords="1075,80,1277,107"/>
<area shape="rect" id="node12" href="_rtdm_file_ext_8h.html" title="../RtdmFileIO/RtdmFileExt.h" alt="" coords="1302,80,1495,107"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_event_counter_str.html">EventCounterStr</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to maintain event information regarding the number of occurrences of each unique event. This information is part of the IELF file.  <a href="struct_event_counter_str.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_event_str.html">EventStr</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to maintain event information for each logged event. This information is part of the IELF file.  <a href="struct_event_str.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_ielf_str.html">IelfStr</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Memory image of the IELF stored on disk.  <a href="struct_ielf_str.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_pending_event_queue_str.html">PendingEventQueueStr</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to hold events just logged.  <a href="struct_pending_event_queue_str.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_active_event_queue_str.html">ActiveEventQueueStr</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to hold events which are active (event criteria that initiated event still present).  <a href="struct_active_event_queue_str.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_daily_event_counter.html">DailyEventCounter</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to maintain the individual daily event count. Image stored on disk.  <a href="struct_daily_event_counter.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a1e3d4efe7a14db13a3310f55e4509e8f"><td class="memItemLeft" align="right" valign="top"><a id="a1e3d4efe7a14db13a3310f55e4509e8f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_e_l_f_task_8c.html#a1e3d4efe7a14db13a3310f55e4509e8f">IELF_DATA_FILENAME</a>&#160;&#160;&#160;&quot;ielf.flt&quot;</td></tr>
<tr class="memdesc:a1e3d4efe7a14db13a3310f55e4509e8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">file name used to store IELF file <br /></td></tr>
<tr class="separator:a1e3d4efe7a14db13a3310f55e4509e8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d6394a980286d0a6bf5255d5e962312"><td class="memItemLeft" align="right" valign="top"><a id="a2d6394a980286d0a6bf5255d5e962312"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_e_l_f_task_8c.html#a2d6394a980286d0a6bf5255d5e962312">IELF_CRC_FILENAME</a>&#160;&#160;&#160;&quot;ielf.crc&quot;</td></tr>
<tr class="memdesc:a2d6394a980286d0a6bf5255d5e962312"><td class="mdescLeft">&#160;</td><td class="mdescRight">file name used to store IELF CRC file which is used to verify the integrity of the IELF file <br /></td></tr>
<tr class="separator:a2d6394a980286d0a6bf5255d5e962312"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8197766168fa8ac76e004dc788023515"><td class="memItemLeft" align="right" valign="top"><a id="a8197766168fa8ac76e004dc788023515"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_e_l_f_task_8c.html#a8197766168fa8ac76e004dc788023515">IELF_DAILY_EVENT_COUNTER_FILENAME</a>&#160;&#160;&#160;&quot;ielfevnt.dat&quot;</td></tr>
<tr class="memdesc:a8197766168fa8ac76e004dc788023515"><td class="mdescLeft">&#160;</td><td class="mdescRight">file name used to store IELF daily event log counters <br /></td></tr>
<tr class="separator:a8197766168fa8ac76e004dc788023515"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9f693ccc95c69fd7bf8b39b4739bae2"><td class="memItemLeft" align="right" valign="top"><a id="ab9f693ccc95c69fd7bf8b39b4739bae2"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_e_l_f_task_8c.html#ab9f693ccc95c69fd7bf8b39b4739bae2">IELF_CLEAR_FILENAME</a>&#160;&#160;&#160;&quot;Clear.ielf&quot;</td></tr>
<tr class="memdesc:ab9f693ccc95c69fd7bf8b39b4739bae2"><td class="mdescLeft">&#160;</td><td class="mdescRight">The name of the file uploaded by the PTU to indicate that the IELF data should be cleared. <br /></td></tr>
<tr class="separator:ab9f693ccc95c69fd7bf8b39b4739bae2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6c3df60fc8f396084cd23fc97b21b54"><td class="memItemLeft" align="right" valign="top"><a id="aa6c3df60fc8f396084cd23fc97b21b54"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_e_l_f_task_8c.html#aa6c3df60fc8f396084cd23fc97b21b54">IELF_VERSION</a>&#160;&#160;&#160;0x30000000</td></tr>
<tr class="memdesc:aa6c3df60fc8f396084cd23fc97b21b54"><td class="mdescLeft">&#160;</td><td class="mdescRight">specified version used in IELF file <br /></td></tr>
<tr class="separator:aa6c3df60fc8f396084cd23fc97b21b54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a427ffe4394306d962b8972b3bc952e1c"><td class="memItemLeft" align="right" valign="top"><a id="a427ffe4394306d962b8972b3bc952e1c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_e_l_f_task_8c.html#a427ffe4394306d962b8972b3bc952e1c">SECONDS_PER_DAY</a>&#160;&#160;&#160;86400</td></tr>
<tr class="memdesc:a427ffe4394306d962b8972b3bc952e1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">number of seconds in a day <br /></td></tr>
<tr class="separator:a427ffe4394306d962b8972b3bc952e1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06a0e36b2745eaf905d03a3a54759f59"><td class="memItemLeft" align="right" valign="top"><a id="a06a0e36b2745eaf905d03a3a54759f59"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_e_l_f_task_8c.html#a06a0e36b2745eaf905d03a3a54759f59">MAX_NUMBER_OF_UNIQUE_EVENTS</a>&#160;&#160;&#160;1024</td></tr>
<tr class="memdesc:a06a0e36b2745eaf905d03a3a54759f59"><td class="mdescLeft">&#160;</td><td class="mdescRight">maximum number of unique events <br /></td></tr>
<tr class="separator:a06a0e36b2745eaf905d03a3a54759f59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d8f01f9155b35e9814bf6f53c9a65b7"><td class="memItemLeft" align="right" valign="top"><a id="a1d8f01f9155b35e9814bf6f53c9a65b7"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_e_l_f_task_8c.html#a1d8f01f9155b35e9814bf6f53c9a65b7">EVENT_FIFO_SIZE_IN_FILE</a>&#160;&#160;&#160;2100</td></tr>
<tr class="memdesc:a1d8f01f9155b35e9814bf6f53c9a65b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">size of the event FIFO in IELF file. Old events will be overwritten. <br /></td></tr>
<tr class="separator:a1d8f01f9155b35e9814bf6f53c9a65b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15068bc6e2122ff6c00b94f213333cfe"><td class="memItemLeft" align="right" valign="top"><a id="a15068bc6e2122ff6c00b94f213333cfe"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_e_l_f_task_8c.html#a15068bc6e2122ff6c00b94f213333cfe">FILE_EMPTY</a>&#160;&#160;&#160;-1</td></tr>
<tr class="memdesc:a15068bc6e2122ff6c00b94f213333cfe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to identify the IELF file event log is empty. <br /></td></tr>
<tr class="separator:a15068bc6e2122ff6c00b94f213333cfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdbbf9327ed082d44f255455cc664a78"><td class="memItemLeft" align="right" valign="top"><a id="acdbbf9327ed082d44f255455cc664a78"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_e_l_f_task_8c.html#acdbbf9327ed082d44f255455cc664a78">PENDING_EVENT_QUEUE_SIZE</a>&#160;&#160;&#160;16</td></tr>
<tr class="memdesc:acdbbf9327ed082d44f255455cc664a78"><td class="mdescLeft">&#160;</td><td class="mdescRight">Max size of the pending event log. All pending events will be transferred to active events every task cycle, this freeing up the entire pending event log every task cycle. <br /></td></tr>
<tr class="separator:acdbbf9327ed082d44f255455cc664a78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7666171a19cae713bfe995cc1563493"><td class="memItemLeft" align="right" valign="top"><a id="ab7666171a19cae713bfe995cc1563493"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_e_l_f_task_8c.html#ab7666171a19cae713bfe995cc1563493">ACTIVE_EVENT_QUEUE_SIZE</a>&#160;&#160;&#160;128</td></tr>
<tr class="memdesc:ab7666171a19cae713bfe995cc1563493"><td class="mdescLeft">&#160;</td><td class="mdescRight">Max size of the active event log. All active events (event criteria still present) will invoke its callback to determine when the event criteria no longer exists. When that occurs, the event will be removed from the active event list. <br /></td></tr>
<tr class="separator:ab7666171a19cae713bfe995cc1563493"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a732f5109106923a390fde6bec629addd"><td class="memItemLeft" align="right" valign="top"><a id="a732f5109106923a390fde6bec629addd"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_e_l_f_task_8c.html#a732f5109106923a390fde6bec629addd">EVENT_QUEUE_ENTRY_EMPTY</a>&#160;&#160;&#160;-1</td></tr>
<tr class="memdesc:a732f5109106923a390fde6bec629addd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Identifies that the entry in either the pending or active event list is available (id is set to this value if entry is available). <br /></td></tr>
<tr class="separator:a732f5109106923a390fde6bec629addd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9373758541926f902e3facd8fa3c2abb"><td class="memItemLeft" align="right" valign="top"><a id="a9373758541926f902e3facd8fa3c2abb"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_e_l_f_task_8c.html#a9373758541926f902e3facd8fa3c2abb">EVENT_LOGGED_WAITING_FOR_CLOSE</a>&#160;&#160;&#160;0xFFFFFFFF</td></tr>
<tr class="memdesc:a9373758541926f902e3facd8fa3c2abb"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is stored in failure end indicating that an event was logged but that the conditions that caused the event have not gone away. Also used on a power cycle to indicate that an event occurred but wasn't "closed" prior to reset or a power off or cycle. <br /></td></tr>
<tr class="separator:a9373758541926f902e3facd8fa3c2abb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e7c3d4c8d48d336ee3794ea938adcb6"><td class="memItemLeft" align="right" valign="top"><a id="a8e7c3d4c8d48d336ee3794ea938adcb6"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_e_l_f_task_8c.html#a8e7c3d4c8d48d336ee3794ea938adcb6">MAX_ALLOWED_EVENTS_PER_DAY</a>&#160;&#160;&#160;10</td></tr>
<tr class="memdesc:a8e7c3d4c8d48d336ee3794ea938adcb6"><td class="mdescLeft">&#160;</td><td class="mdescRight">The same event can only be logged MAX_ALLOWED_EVENTS_PER_DAY this many times per day. However, if the same event occurs more per day, the event counter is incremented regardless. <br /></td></tr>
<tr class="separator:a8e7c3d4c8d48d336ee3794ea938adcb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ae62519487d1404f825c4e5f5536efe0f"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_e_l_f_task_8c.html#ae62519487d1404f825c4e5f5536efe0f">ResetReasonEnum</a> { <a class="el" href="_i_e_l_f_task_8c.html#ae62519487d1404f825c4e5f5536efe0fac22014f8f78ba8b947f84427aa17ce54">RESET_BY_PTU</a> = 0x01, 
<a class="el" href="_i_e_l_f_task_8c.html#ae62519487d1404f825c4e5f5536efe0fa5c8c20f69eeb5b9187a7bd4a5fa6084a">RESET_AFTER_DOWNLOAD</a> = 0x02
 }<tr class="memdesc:ae62519487d1404f825c4e5f5536efe0f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to determine why the IELF file was reset.  <a href="_i_e_l_f_task_8c.html#ae62519487d1404f825c4e5f5536efe0f">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:ae62519487d1404f825c4e5f5536efe0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa7a0fa6da0e22f29bd29c05bdb2f84d0"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_e_l_f_task_8c.html#aa7a0fa6da0e22f29bd29c05bdb2f84d0">IelfInit</a> (UINT8 systemId)</td></tr>
<tr class="memdesc:aa7a0fa6da0e22f29bd29c05bdb2f84d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the IELF software component.  <a href="#aa7a0fa6da0e22f29bd29c05bdb2f84d0">More...</a><br /></td></tr>
<tr class="separator:aa7a0fa6da0e22f29bd29c05bdb2f84d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0dec005da8408356e5d57c9b19e0aee2"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_e_l_f_task_8c.html#a0dec005da8408356e5d57c9b19e0aee2">CreateNewIELFOverlay</a> (UINT8 reasonForReset, <a class="el" href="struct_r_t_d_m_time_str.html">RTDMTimeStr</a> *currentTime)</td></tr>
<tr class="memdesc:a0dec005da8408356e5d57c9b19e0aee2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a fresh IELF file memory overlay.  <a href="#a0dec005da8408356e5d57c9b19e0aee2">More...</a><br /></td></tr>
<tr class="separator:a0dec005da8408356e5d57c9b19e0aee2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd2427dc5efe150a5e5ffd0c67d60817"><td class="memItemLeft" align="right" valign="top">static BOOL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_e_l_f_task_8c.html#afd2427dc5efe150a5e5ffd0c67d60817">AddEventToActiveQueue</a> (<a class="el" href="struct_pending_event_queue_str.html">PendingEventQueueStr</a> *pendingEvent)</td></tr>
<tr class="memdesc:afd2427dc5efe150a5e5ffd0c67d60817"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copies an event from the pending queue to the active queue.  <a href="#afd2427dc5efe150a5e5ffd0c67d60817">More...</a><br /></td></tr>
<tr class="separator:afd2427dc5efe150a5e5ffd0c67d60817"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33407b6a94d1b4f38df04f1b5210b290"><td class="memItemLeft" align="right" valign="top">static INT32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_e_l_f_task_8c.html#a33407b6a94d1b4f38df04f1b5210b290">DequeuePendingEvents</a> (BOOL *fileUpdateRequired)</td></tr>
<tr class="memdesc:a33407b6a94d1b4f38df04f1b5210b290"><td class="mdescLeft">&#160;</td><td class="mdescRight">Scans and dequeues logged events from pending queue.  <a href="#a33407b6a94d1b4f38df04f1b5210b290">More...</a><br /></td></tr>
<tr class="separator:a33407b6a94d1b4f38df04f1b5210b290"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a858d78c44634bb164b52f4eba51dc190"><td class="memItemLeft" align="right" valign="top">static UINT32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_e_l_f_task_8c.html#a858d78c44634bb164b52f4eba51dc190">MemoryOverlayCRCCalc</a> (void)</td></tr>
<tr class="memdesc:a858d78c44634bb164b52f4eba51dc190"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the CRC of the IELF file memory overlay.  <a href="#a858d78c44634bb164b52f4eba51dc190">More...</a><br /></td></tr>
<tr class="separator:a858d78c44634bb164b52f4eba51dc190"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa603d0ca076a85447f3b36ac17967ecf"><td class="memItemLeft" align="right" valign="top">static BOOL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_e_l_f_task_8c.html#aa603d0ca076a85447f3b36ac17967ecf">WriteIelfDataFile</a> (void)</td></tr>
<tr class="memdesc:aa603d0ca076a85447f3b36ac17967ecf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes the IELF data file.  <a href="#aa603d0ca076a85447f3b36ac17967ecf">More...</a><br /></td></tr>
<tr class="separator:aa603d0ca076a85447f3b36ac17967ecf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc45c9ff8f4ee5a2662ebec367b55495"><td class="memItemLeft" align="right" valign="top">static BOOL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_e_l_f_task_8c.html#adc45c9ff8f4ee5a2662ebec367b55495">WriteIelfCRCFile</a> (UINT32 crc)</td></tr>
<tr class="memdesc:adc45c9ff8f4ee5a2662ebec367b55495"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes the IELF file CRC to a CRC file.  <a href="#adc45c9ff8f4ee5a2662ebec367b55495">More...</a><br /></td></tr>
<tr class="separator:adc45c9ff8f4ee5a2662ebec367b55495"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a928bfb9c09c9e2c128b1c1f3cf8f9011"><td class="memItemLeft" align="right" valign="top">static BOOL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_e_l_f_task_8c.html#a928bfb9c09c9e2c128b1c1f3cf8f9011">BothTimesToday</a> (UINT32 seconds1, UINT32 seconds2)</td></tr>
<tr class="memdesc:a928bfb9c09c9e2c128b1c1f3cf8f9011"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines if two times (UTC seconds) occur on the same calendar day.  <a href="#a928bfb9c09c9e2c128b1c1f3cf8f9011">More...</a><br /></td></tr>
<tr class="separator:a928bfb9c09c9e2c128b1c1f3cf8f9011"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a378167545ff595777c14df27b8cccb"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_e_l_f_task_8c.html#a9a378167545ff595777c14df27b8cccb">InitDailyEventCounter</a> (UINT32 utcSeconds)</td></tr>
<tr class="memdesc:a9a378167545ff595777c14df27b8cccb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the daily event counter.  <a href="#a9a378167545ff595777c14df27b8cccb">More...</a><br /></td></tr>
<tr class="separator:a9a378167545ff595777c14df27b8cccb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15e0556cba55949b80a8bd18328198af"><td class="memItemLeft" align="right" valign="top">static BOOL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_e_l_f_task_8c.html#a15e0556cba55949b80a8bd18328198af">WriteIelfEventCounterFile</a> (UINT32 utcSeconds)</td></tr>
<tr class="memdesc:a15e0556cba55949b80a8bd18328198af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes the event counter file to disk.  <a href="#a15e0556cba55949b80a8bd18328198af">More...</a><br /></td></tr>
<tr class="separator:a15e0556cba55949b80a8bd18328198af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d7f8e3599ddac242843f62061603ae6"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_e_l_f_task_8c.html#a0d7f8e3599ddac242843f62061603ae6">ServiceDailyEventCounter</a> (UINT32 currentTimeSecs)</td></tr>
<tr class="memdesc:a0d7f8e3599ddac242843f62061603ae6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines whether or not to reset event counters.  <a href="#a0d7f8e3599ddac242843f62061603ae6">More...</a><br /></td></tr>
<tr class="separator:a0d7f8e3599ddac242843f62061603ae6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2e1407fe87dc06efc58aabe7e181fd0"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_e_l_f_task_8c.html#af2e1407fe87dc06efc58aabe7e181fd0">UpdateRecordIndexes</a> (void)</td></tr>
<tr class="memdesc:af2e1407fe87dc06efc58aabe7e181fd0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the IELF file record indexes.  <a href="#af2e1407fe87dc06efc58aabe7e181fd0">More...</a><br /></td></tr>
<tr class="separator:af2e1407fe87dc06efc58aabe7e181fd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5f6df2c0f54729f4f878707399cd525"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_e_l_f_task_8c.html#aa5f6df2c0f54729f4f878707399cd525">ScanForOpenEvents</a> (void)</td></tr>
<tr class="memdesc:aa5f6df2c0f54729f4f878707399cd525"><td class="mdescLeft">&#160;</td><td class="mdescRight">Scans the entire the even log for open events.  <a href="#aa5f6df2c0f54729f4f878707399cd525">More...</a><br /></td></tr>
<tr class="separator:aa5f6df2c0f54729f4f878707399cd525"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af04b33531cab5895f4282e31a342fb32"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_e_l_f_task_8c.html#af04b33531cab5895f4282e31a342fb32">SetEventLogIndex</a> (void)</td></tr>
<tr class="memdesc:af04b33531cab5895f4282e31a342fb32"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the index into the logged events.  <a href="#af04b33531cab5895f4282e31a342fb32">More...</a><br /></td></tr>
<tr class="separator:af04b33531cab5895f4282e31a342fb32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00ee3b35f1aa8f1d0652bcae453426fd"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_e_l_f_task_8c.html#a00ee3b35f1aa8f1d0652bcae453426fd">IelfClearFileProcessing</a> (<a class="el" href="struct_r_t_d_m_time_str.html">RTDMTimeStr</a> *currentTime)</td></tr>
<tr class="memdesc:a00ee3b35f1aa8f1d0652bcae453426fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function examines the specified drive/directory for a specific file (defined by IELF_CLEAR_FILENAME). This file will be uploaded by the PTU upon user command if the user wishes to clear all IELF data. This method is the best way to gracefully clear the IELF data.  <a href="#a00ee3b35f1aa8f1d0652bcae453426fd">More...</a><br /></td></tr>
<tr class="separator:a00ee3b35f1aa8f1d0652bcae453426fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9dab0729b2652408c0d9efb8feb1b00"><td class="memItemLeft" align="right" valign="top"><a id="ab9dab0729b2652408c0d9efb8feb1b00"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>IelfLogTest</b> (void)</td></tr>
<tr class="separator:ab9dab0729b2652408c0d9efb8feb1b00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36503224153938d9309d7288a96d48cd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_e_l_f_task_8c.html#a36503224153938d9309d7288a96d48cd">IELF</a> (<a class="el" href="structdata_block___i_e_l_f.html">TYPE_IELF_IF</a> *interface)</td></tr>
<tr class="memdesc:a36503224153938d9309d7288a96d48cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Invoked periodically to service the event log.  <a href="#a36503224153938d9309d7288a96d48cd">More...</a><br /></td></tr>
<tr class="separator:a36503224153938d9309d7288a96d48cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1af8266d7b7b8b3a5ea67ac7ee406bdb"><td class="memItemLeft" align="right" valign="top">INT32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_e_l_f_task_8c.html#a1af8266d7b7b8b3a5ea67ac7ee406bdb">LogIELFEvent</a> (UINT16 eventId)</td></tr>
<tr class="memdesc:a1af8266d7b7b8b3a5ea67ac7ee406bdb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Logs an event to the pending queue.  <a href="#a1af8266d7b7b8b3a5ea67ac7ee406bdb">More...</a><br /></td></tr>
<tr class="separator:a1af8266d7b7b8b3a5ea67ac7ee406bdb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aaf88814a1acb14ec70786043e7d0eecb"><td class="memItemLeft" align="right" valign="top"><a id="aaf88814a1acb14ec70786043e7d0eecb"></a>
static <a class="el" href="struct_ielf_str.html">IelfStr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_e_l_f_task_8c.html#aaf88814a1acb14ec70786043e7d0eecb">m_FileOverlay</a></td></tr>
<tr class="memdesc:aaf88814a1acb14ec70786043e7d0eecb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Memory copy of the IELF file on disk. <br /></td></tr>
<tr class="separator:aaf88814a1acb14ec70786043e7d0eecb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa1192e913e066c7d5c45c063df760e5"><td class="memItemLeft" align="right" valign="top"><a id="aaa1192e913e066c7d5c45c063df760e5"></a>
static <a class="el" href="struct_pending_event_queue_str.html">PendingEventQueueStr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_e_l_f_task_8c.html#aaa1192e913e066c7d5c45c063df760e5">m_PendingEvent</a> [<a class="el" href="_i_e_l_f_task_8c.html#acdbbf9327ed082d44f255455cc664a78">PENDING_EVENT_QUEUE_SIZE</a>]</td></tr>
<tr class="memdesc:aaa1192e913e066c7d5c45c063df760e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Contains events that just occurred, but haven't been copied to the m_ActiveEvent list. The reason to have both a pending list and active list is the following. The act of copying from pending to active logs the event as a single shot. Then, the active list is used to invoke the event's callback to determine when the event ends. It also reduces the amount of possible contention over a resource if m_PendingEvent and m_ActiveEvent were combined. <br /></td></tr>
<tr class="separator:aaa1192e913e066c7d5c45c063df760e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab58904b6d27d33b5b25013450e293f92"><td class="memItemLeft" align="right" valign="top"><a id="ab58904b6d27d33b5b25013450e293f92"></a>
static <a class="el" href="struct_active_event_queue_str.html">ActiveEventQueueStr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_e_l_f_task_8c.html#ab58904b6d27d33b5b25013450e293f92">m_ActiveEvent</a> [<a class="el" href="_i_e_l_f_task_8c.html#ab7666171a19cae713bfe995cc1563493">ACTIVE_EVENT_QUEUE_SIZE</a>]</td></tr>
<tr class="memdesc:ab58904b6d27d33b5b25013450e293f92"><td class="mdescLeft">&#160;</td><td class="mdescRight">Contains all of the active events (events that have been logged, but haven't ended. <br /></td></tr>
<tr class="separator:ab58904b6d27d33b5b25013450e293f92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ab4cebbc254a5454dce24ae8f544aa9"><td class="memItemLeft" align="right" valign="top"><a id="a6ab4cebbc254a5454dce24ae8f544aa9"></a>
static UINT16&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_e_l_f_task_8c.html#a6ab4cebbc254a5454dce24ae8f544aa9">m_LogIndex</a></td></tr>
<tr class="memdesc:a6ab4cebbc254a5454dce24ae8f544aa9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write index into the m_FileOverlay.event array. <br /></td></tr>
<tr class="separator:a6ab4cebbc254a5454dce24ae8f544aa9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9229a4f88566158325404b566d66c8c8"><td class="memItemLeft" align="right" valign="top"><a id="a9229a4f88566158325404b566d66c8c8"></a>
static INT32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_e_l_f_task_8c.html#a9229a4f88566158325404b566d66c8c8">m_SemaphoreId</a> = 0</td></tr>
<tr class="memdesc:a9229a4f88566158325404b566d66c8c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Semaphore used to block access from different threads to shared resources "m_PendingEvent &amp; m_ActiveEvent". <br /></td></tr>
<tr class="separator:a9229a4f88566158325404b566d66c8c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa30d9c311d3f1a9705bfd9e8a910ab0"><td class="memItemLeft" align="right" valign="top"><a id="afa30d9c311d3f1a9705bfd9e8a910ab0"></a>
static <a class="el" href="struct_daily_event_counter.html">DailyEventCounter</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_e_l_f_task_8c.html#afa30d9c311d3f1a9705bfd9e8a910ab0">m_DailyEventCounterOverlay</a></td></tr>
<tr class="memdesc:afa30d9c311d3f1a9705bfd9e8a910ab0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Memory copy of file that maintains the daily event counter for each event. <br /></td></tr>
<tr class="separator:afa30d9c311d3f1a9705bfd9e8a910ab0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a0d7a75e688ef9043756a6f3daaead1"><td class="memItemLeft" align="right" valign="top"><a id="a7a0d7a75e688ef9043756a6f3daaead1"></a>
static UINT8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_e_l_f_task_8c.html#a7a0d7a75e688ef9043756a6f3daaead1">m_SystemId</a> = 0</td></tr>
<tr class="memdesc:a7a0d7a75e688ef9043756a6f3daaead1"><td class="mdescLeft">&#160;</td><td class="mdescRight">The system Id as specified by Bombardier. <br /></td></tr>
<tr class="separator:a7a0d7a75e688ef9043756a6f3daaead1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ae62519487d1404f825c4e5f5536efe0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae62519487d1404f825c4e5f5536efe0f">&sect;&nbsp;</a></span>ResetReasonEnum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="_i_e_l_f_task_8c.html#ae62519487d1404f825c4e5f5536efe0f">ResetReasonEnum</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Used to determine why the IELF file was reset. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ae62519487d1404f825c4e5f5536efe0fac22014f8f78ba8b947f84427aa17ce54"></a>RESET_BY_PTU&#160;</td><td class="fielddoc"><p>See 071-ICD-004 for details </p>
</td></tr>
<tr><td class="fieldname"><a id="ae62519487d1404f825c4e5f5536efe0fa5c8c20f69eeb5b9187a7bd4a5fa6084a"></a>RESET_AFTER_DOWNLOAD&#160;</td><td class="fielddoc"><p>See 071-ICD-004 for details </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="aa7a0fa6da0e22f29bd29c05bdb2f84d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7a0fa6da0e22f29bd29c05bdb2f84d0">&sect;&nbsp;</a></span>IelfInit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void IelfInit </td>
          <td>(</td>
          <td class="paramtype">UINT8&#160;</td>
          <td class="paramname"><em>systemId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initializes the IELF software component. </p>
<p>This function determines if all files that are required for the IELF requirement are present and valid. If not, the necessary files are created. The memory overlays for the IELF file and the daily event counter are either cleared or copied from disk.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">systemId</td><td>- the system id as specified in the IELF file </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0dec005da8408356e5d57c9b19e0aee2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0dec005da8408356e5d57c9b19e0aee2">&sect;&nbsp;</a></span>CreateNewIELFOverlay()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void CreateNewIELFOverlay </td>
          <td>(</td>
          <td class="paramtype">UINT8&#160;</td>
          <td class="paramname"><em>reasonForReset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_r_t_d_m_time_str.html">RTDMTimeStr</a> *&#160;</td>
          <td class="paramname"><em>currentTime</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a fresh IELF file memory overlay. </p>
<p>This function creates a fresh copy of the IELF memory overlay. It clears all logged events and event counters.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reasonForReset</td><td>- reason why the IELF file was reset (cleared) </td></tr>
    <tr><td class="paramname">currentTime</td><td>- pointer to the current system time </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afd2427dc5efe150a5e5ffd0c67d60817"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd2427dc5efe150a5e5ffd0c67d60817">&sect;&nbsp;</a></span>AddEventToActiveQueue()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static BOOL AddEventToActiveQueue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_pending_event_queue_str.html">PendingEventQueueStr</a> *&#160;</td>
          <td class="paramname"><em>pendingEvent</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Copies an event from the pending queue to the active queue. </p>
<p>This function adds a logged event to the active queue. In the process of adding the event, it updates the event counter and gets the event over callback function. It also adds the event to the IELF event log (memory overlay) if the number of daily events for the event hasn't been exceeded. It also increments the event counter associated with the event. NOTE: This function assumes the calling function has acquired the resource semaphore.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pendingEvent</td><td>- pointer to the event that is to be added to the active event queue</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>BOOL - becomes TRUE if event successfully added to active queue </dd></dl>

</div>
</div>
<a id="a33407b6a94d1b4f38df04f1b5210b290"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33407b6a94d1b4f38df04f1b5210b290">&sect;&nbsp;</a></span>DequeuePendingEvents()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static INT32 DequeuePendingEvents </td>
          <td>(</td>
          <td class="paramtype">BOOL *&#160;</td>
          <td class="paramname"><em>fileUpdateRequired</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Scans and dequeues logged events from pending queue. </p>
<p>This function gets any newly logged events from the pending queue to the active queue. An attempt is made to transfer from pending events to the active queue, but if the queue is full, the transfer will be delayed until room frees up in the active queue (some other event ended). NOTE: Any event can be logged from any task with any priority and is placed on the pending queue.</p>
<p>param fileUpdateRequired - set TRUE if an IELF file write is required </p>

</div>
</div>
<a id="a858d78c44634bb164b52f4eba51dc190"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a858d78c44634bb164b52f4eba51dc190">&sect;&nbsp;</a></span>MemoryOverlayCRCCalc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static UINT32 MemoryOverlayCRCCalc </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculates the CRC of the IELF file memory overlay. </p>
<p>This function calculates the CRC of the IELF file memory overlay. The CRC is used for IELF file integrity.</p>
<dl class="section return"><dt>Returns</dt><dd>UINT32 - CRC of the IELF file memory overlay </dd></dl>

</div>
</div>
<a id="aa603d0ca076a85447f3b36ac17967ecf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa603d0ca076a85447f3b36ac17967ecf">&sect;&nbsp;</a></span>WriteIelfDataFile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static BOOL WriteIelfDataFile </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Writes the IELF data file. </p>
<p>This functions writes the entire IELF file memory overlay to disk.</p>
<dl class="section return"><dt>Returns</dt><dd>BOOL - TRUE if file write was successful; FALSE otherwise </dd></dl>

</div>
</div>
<a id="adc45c9ff8f4ee5a2662ebec367b55495"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc45c9ff8f4ee5a2662ebec367b55495">&sect;&nbsp;</a></span>WriteIelfCRCFile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static BOOL WriteIelfCRCFile </td>
          <td>(</td>
          <td class="paramtype">UINT32&#160;</td>
          <td class="paramname"><em>crc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Writes the IELF file CRC to a CRC file. </p>
<p>This function writes the IELF file CRC to a unique file. This CRC file is used to verify the integrity of the IELF file.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">crc</td><td>- crc that is written to the IELF CRC file </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a928bfb9c09c9e2c128b1c1f3cf8f9011"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a928bfb9c09c9e2c128b1c1f3cf8f9011">&sect;&nbsp;</a></span>BothTimesToday()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static BOOL BothTimesToday </td>
          <td>(</td>
          <td class="paramtype">UINT32&#160;</td>
          <td class="paramname"><em>seconds1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT32&#160;</td>
          <td class="paramname"><em>seconds2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determines if two times (UTC seconds) occur on the same calendar day. </p>
<p>This function compares two unique times (UTC seconds) and determines if they are part of the same calendar day.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">seconds1</td><td>- system time 1 (UTC seconds) </td></tr>
    <tr><td class="paramname">seconds2</td><td>- system time 2 (UTC seconds)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>BOOL - TRUE if the times are part of same day; FALSE otherwise </dd></dl>

</div>
</div>
<a id="a9a378167545ff595777c14df27b8cccb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a378167545ff595777c14df27b8cccb">&sect;&nbsp;</a></span>InitDailyEventCounter()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void InitDailyEventCounter </td>
          <td>(</td>
          <td class="paramtype">UINT32&#160;</td>
          <td class="paramname"><em>utcSeconds</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initializes the daily event counter. </p>
<p>This function determines if the daily event counter file exists and is valid. If either condition is not true, then a new event counter file with all event counters cleared is created. Also, if the file exists and is valid but the last time the file was updated was yesterday or before, then a new file is created.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">utcSeconds</td><td>- current system time (UTC seconds) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a15e0556cba55949b80a8bd18328198af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15e0556cba55949b80a8bd18328198af">&sect;&nbsp;</a></span>WriteIelfEventCounterFile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static BOOL WriteIelfEventCounterFile </td>
          <td>(</td>
          <td class="paramtype">UINT32&#160;</td>
          <td class="paramname"><em>utcSeconds</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Writes the event counter file to disk. </p>
<p>This function writes the event counter file to disk. The event counter file maintains the number of events logged for each event daily. The time the file updated was made as well as the file's contents CRC is maintained in this file.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">utcSeconds</td><td>- current system time (UTC seconds)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>BOOL - TRUE if event counter file updated successfully, FALSE otherwise </dd></dl>

</div>
</div>
<a id="a0d7f8e3599ddac242843f62061603ae6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d7f8e3599ddac242843f62061603ae6">&sect;&nbsp;</a></span>ServiceDailyEventCounter()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ServiceDailyEventCounter </td>
          <td>(</td>
          <td class="paramtype">UINT32&#160;</td>
          <td class="paramname"><em>currentTimeSecs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determines whether or not to reset event counters. </p>
<p>This function determines when a change of day has occurred between the last time the IELF file was updated and the current time. If these days are different, then the daily event counter for every event is cleared allowing more events to be logged. There is a daily limit of logged events for each unique event. However if this limit is exceeded, the event counter for that event will still be incremented, but the event will not be logged into the event FIFO.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">currentTimeSecs</td><td>- current system time (UTC seconds) </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="_i_e_l_f_task_8c_a0d7f8e3599ddac242843f62061603ae6_cgraph.png" border="0" usemap="#_i_e_l_f_task_8c_a0d7f8e3599ddac242843f62061603ae6_cgraph" alt=""/></div>
<map name="_i_e_l_f_task_8c_a0d7f8e3599ddac242843f62061603ae6_cgraph" id="_i_e_l_f_task_8c_a0d7f8e3599ddac242843f62061603ae6_cgraph">
<area shape="rect" id="node2" href="_i_e_l_f_task_8c.html#a928bfb9c09c9e2c128b1c1f3cf8f9011" title="Determines if two times (UTC seconds) occur on the same calendar day. " alt="" coords="240,5,368,32"/>
</map>
</div>

</div>
</div>
<a id="af2e1407fe87dc06efc58aabe7e181fd0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2e1407fe87dc06efc58aabe7e181fd0">&sect;&nbsp;</a></span>UpdateRecordIndexes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void UpdateRecordIndexes </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Updates the IELF file record indexes. </p>
<p>This function is invoked after an event is logged. It is responsible for updating the first and last record index in the IELF file. If the event FIFO hasn't yet been filled, the last record index is modified and the first record index is set at 0. Once the event FIFO has been filled the last record index is set to 1 and the first record index is used to track the most recent entry. The values of first record index and last record index are specified in document 071-ICD-0004. </p>

</div>
</div>
<a id="aa5f6df2c0f54729f4f878707399cd525"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5f6df2c0f54729f4f878707399cd525">&sect;&nbsp;</a></span>ScanForOpenEvents()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ScanForOpenEvents </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Scans the entire the even log for open events. </p>
<p>This function scans the entire event log to determine if any logged events did not end. In other words, a reset or power cycle occurred prior to the event being declared as ended. If any of these events are found, they are added to the active event list so they can be closed when the events' condition are inactive. </p>

</div>
</div>
<a id="af04b33531cab5895f4282e31a342fb32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af04b33531cab5895f4282e31a342fb32">&sect;&nbsp;</a></span>SetEventLogIndex()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void SetEventLogIndex </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets the index into the logged events. </p>
<p>This function examines the first record index and the last record index to determine where to set the index that will be used to log new events. Since the event log is a FIFO, the index must be set to the oldest event if the FIFO is full or just past the most recent event if the FIFO isn't full. The values of first record index and last record index are specified in document 071-ICD-0004. </p>

</div>
</div>
<a id="a00ee3b35f1aa8f1d0652bcae453426fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00ee3b35f1aa8f1d0652bcae453426fd">&sect;&nbsp;</a></span>IelfClearFileProcessing()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void IelfClearFileProcessing </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_r_t_d_m_time_str.html">RTDMTimeStr</a> *&#160;</td>
          <td class="paramname"><em>currentTime</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function examines the specified drive/directory for a specific file (defined by IELF_CLEAR_FILENAME). This file will be uploaded by the PTU upon user command if the user wishes to clear all IELF data. This method is the best way to gracefully clear the IELF data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">currentTime</td><td>- pointer to the current system time structure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a36503224153938d9309d7288a96d48cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36503224153938d9309d7288a96d48cd">&sect;&nbsp;</a></span>IELF()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IELF </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdata_block___i_e_l_f.html">TYPE_IELF_IF</a> *&#160;</td>
          <td class="paramname"><em>interface</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Invoked periodically to service the event log. </p>
<p>This function is invoked at the desired task period. It attempts to transfer any newly logged events that are on the pending queue to the active queue. After this is performed, it then scans the active event queue for any active events. If any events are active, it invokes the event's callback function that checks if the event conditions are present. If the event conditions are no longer present, it logs the time the event ended and frees up the entry in the active event queue. If any change to either the daily event counter or the IELF are required, the memory overlay for both are written to disk.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">interface</td><td>- structure used to communicate info to/from IELF component (currently unused) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1af8266d7b7b8b3a5ea67ac7ee406bdb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1af8266d7b7b8b3a5ea67ac7ee406bdb">&sect;&nbsp;</a></span>LogIELFEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">INT32 LogIELFEvent </td>
          <td>(</td>
          <td class="paramtype">UINT16&#160;</td>
          <td class="paramname"><em>eventId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Logs an event to the pending queue. </p>
<p>This function logs a system event. The code attempts to acquire a resource semaphore so that the event can be placed successfully in the pending event queue. This function can be called from any priority task/thread.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">eventId</td><td>- event id</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>INT32 - 0 if event placed in pending queue successfully; negative number if not </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Dec 7 2016 09:33:28 for RTDM/IELF Application Software by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
